{% extends "catalogue/base.html" %}
{% block title %}Catalogue Search{% endblock %}
{% block header %}<h1>Komponenten Suche</h1>{% endblock %}
{% block body %}
  <main>
    <section>
      <form method="get">
        {% with filter.form as form %}
          {% for hidden in form.hidden_fields %}
            {{ hidden }}
          {% endfor %}
          {% for field in form.visible_fields %}
            <p>
              <label for="{{ field.id_for_label }}">{{ field.label }}</label>
              {{ field }}
            </p>
          {% endfor %}
        {% endwith %}
        <input type="submit"/>
      </form>
    </section>
    <section>
      {% if components %}
        {% for c in components %}
          <aside>
            <h2><a href="{% url 'catalogue:detail' c.id %}">{{ c.basedata.name }}</a></h2>
            <sup>{{ c.basedata.get_trl_display }}</sup>
            <p>{{ c.basedata.description }}</p>
            {% if c.basedata.task_set %}
              <h3>Tasks:</h3>
              <ul>
                {% for t in c.basedata.task_set.all %}
                  <li>{{ t.get_name_display }}</li>
                {% endfor %}
              </ul>
            {% endif %}
          </aside>
        {% endfor %}
      {% else %}
        <p>No Components are available.</p>
      {% endif %}
    </section>
  </main>
{% endblock %}